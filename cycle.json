{
  "version": "1.0",
  "containers": {
    "redis-node-1": {
      "name": "redis-node-1",
      "image": {
        "name": "redis-node-1",
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/master",
            "build_file": "/master/Dockerfile"
          }
        }
      },
      "stateful": true,
      "config": {
        "network": {
          "public": "disable",
          "hostname": "redis-node-1",
          "ports": [ "6379:6379", "16379:16379" ]
        },
        "deploy": {
          "instances": 1
        }
      },
      "volumes": [
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/data"
        },
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/var/lib/config"
        }
      ]
    },
    "redis-node-2": {
      "name": "redis-node-2",
      "image": {
        "name": "redis-node-2",
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/master",
            "build_file": "/master/Dockerfile"
          }
        }
      },
      "stateful": true,
      "config": {
        "network": {
          "public": "disable",
          "hostname": "redis-node-2",
          "ports": [ "6379:6379", "16379:16379" ]
        },
        "deploy": {
          "instances": 1,
          "startup": {
            "delay": "3s"
          }
        }
      },
      "volumes": [
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/data"
        },
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/var/lib/config"
        }
      ]
    },
    "redis-node-3": {
      "name": "redis-node-3",
      "image": {
        "name": "redis-node-3",
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/replica",
            "build_file": "/replica/Dockerfile"
          }
        }
      },
      "stateful": true,
      "config": {
        "network": {
          "public": "disable",
          "hostname": "redis-node-3",
          "ports": [ "6379:6379", "16379:16379" ]
        },
        "deploy": {
          "instances": 1,
          "startup": {
            "delay": "3s"
          }
        }
      },
      "volumes": [
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/data"
        },
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/var/lib/config"
        }
      ]
    },
    "redis-node-4": {
      "name": "redis-node-4",
      "image": {
        "name": "redis-node-4",
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/replica",
            "build_file": "/replica/Dockerfile"
          }
        }
      },
      "stateful": true,
      "config": {
        "network": {
          "public": "disable",
          "hostname": "redis-node-4",
          "ports": [ "6379:6379", "16379:16379" ]
        },
        "deploy": {
          "instances": 1,
          "startup": {
            "delay": "3s"
          }
        }
      },
      "volumes": [
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/data"
        },
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/var/lib/config"
        }
      ]
    },
    "redis-cluster-proxy": {
      "name": "redis-cluster-proxy",
      "image": {
        "name": "redis-cluster-proxy",
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/cluster-proxy",
            "build_file": "/cluster-proxy/Dockerfile"
          }
        }
      },
      "stateful": true,
      "config": {
        "network": {
          "public": "disable",
          "hostname": "redis-cluster-proxy",
          "ports": [ "6379:6379" ]
        },
        "deploy": {
          "instances": 1,
          "startup": {
            "delay": "15s"
          }
        }
      },
      "volumes": [
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/data"
        },
        {
          "local": {
            "max_size": "3G"
          },
          "destination": "/var/lib/config"
        }
      ]
    },
    "redis-cluster-init": {
      "name": "redis-cluster-init",
      "image": {
        "name": "redis-cluster-init",
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/init",
            "build_file": "/init/Dockerfile"
          }
        }
      },
      "stateful": false,
      "config": {
        "network": {
          "public": "disable",
          "hostname": "redis-cluster-init"
        },
        "deploy": {
          "instances": 1,
          "strategy": "function",
          "startup": {
            "delay": "10s"
          }
        }
      }
    }
  }
}
